# 支出先CSVデータ品質調査レポート

**調査日**: 2026-02-21
**対象ファイル**: `data/year_2024/5-1_RS_2024_支出先_支出情報.csv`
**照合データ**: `public/data/houjin-lookup.json`（国税庁法人番号公表データ由来）

---

## 法人番号の統計（全体）

**対象行数（支出先名あり）: 173,359行 / ユニーク法人番号（有効値）: 18,934件**

| 区分 | 件数 | 割合 |
|---|---|---|
| **有効**（13桁の数字） | 134,907行 | 77.8% |
| **空欄** | 38,448行 | 22.2% |
| **桁数エラー** | 4行 | 0.0% |
| **非数字エラー** | 0行 | — |

### エラー値の詳細

| 種別 | 件数 | 内容 |
|---|---|---|
| 1桁 `"0"` | 2行 | JV（共同体）の行。支出先名が長く、法人番号に `0` が入力されている |
| 12桁 `901000102685` | 2行 | みずほリサーチ&テクノロジーズ。正しくは `9010001026855`（13桁）の入力ミスと推察 |
| `9999999999999` | 1件（有効扱い） | ダミー値。NTA未登録として扱い済み |

空欄22.2%の主な要因：集約ブロック行（個別支出先のCNを持たない行）、または中小業者・個人など法人番号を持たないケース。

---

## 支出先の種別（entityType）について

### 種別の取得元（2段階）

| 優先順位 | 取得元 | 詳細 |
|---|---|---|
| 1 | CSVの `法人種別` コード | 101=国の機関, 201=地方公共団体, 301-305=民間企業, 399=その他各種法人, 401=外国法人, 499=その他 |
| 2 | LLM推定（`generate-entity-dict.ts`） | コードが空欄の場合、支出先名からLLMが7分類に推定 |

### CSVコードの分布（CN有り行）

| コード | 意味 | 行数 | ユニーク支出先名 |
|---|---|---|---|
| 301-305 | 民間企業 | 70,515行 | 11,342件 |
| 399 | その他各種法人（NPO・協同組合等） | 23,116行 | 4,198件 |
| `""`（空欄） | コード未入力 → LLM判定 | 22,357行 | 4,809件 |
| 201 | 地方公共団体 | 16,872行 | 1,237件 |
| 101 | 国の機関 | 1,181行 | 198件 |
| 499 | その他 | 728行 | 263件 |
| 401 | 外国法人 | 142行 | **32件**（CSVに明示された真の外国法人） |

### LLM誤分類問題: 外国法人の過剰分類

`entity-normalization.json` では外国法人が **953件** に分類されているが、内訳は以下の通り：

| 区分 | 件数 |
|---|---|
| CSVコード401ありの外国法人（確実） | 30件 |
| コード空欄でLLMが外国法人と判定 | 919件 |
| その他コードでLLMが外国法人と判定 | 8件 |

LLM判定919件のうち、**英字・外資系キーワードを含まない155件**に誤分類の疑いがある。
例: 「国際再生可能エネルギー機関」「国連世界食糧計画」「包括的核実験禁止条約機関」（→ 国際機関）、
「沖縄事務所」「カンボジア事務所」（→ 国内組織の事務所名）など。

### 具体的な誤分類例: 北海道農政事務所

```
支出先名:   北海道農政事務所
CSVコード:  ""（空欄）
法人番号:   5000012080001
NTA登録名:  農林水産省（国の機関）
entity-normalization.json の entityType: 外国法人  ← 誤分類
正しい分類: 国の機関（農林水産省の地方機関・地方農政局の出先）
```

**原因**: CSVに法人種別コードがなく、LLMが名前から推定した際に誤って外国法人と判定。
農政事務所・農政局など国の出先機関でも同様の誤分類が発生している可能性がある。

---

## 概要

支出先CSVにおいて、同一の `支出先名` に複数の `法人番号` が紐付くケースが **305件** 存在する。
これらは主に3パターンに分類される。

| パターン | 原因 | 件数（概算） | 対処方針 |
|---|---|---|---|
| 民間企業・同名別法人 | 同名で所在地が異なる別会社が実在 | 大多数 | 法人番号単位で集約 |
| 地方公共団体・入力ミス型 | 他の自治体の法人番号が2〜4行だけ混入 | 複数都道府県 | 名前単位集約でOK（誤CNは無視） |
| 地方公共団体・別法人混入型 | 組合・民間企業のCNが誤って入力 | 数件 | 「別法人」として警告表示 |

---

## 民間企業の同名別法人ケース（抜粋）

同名でも所在地・法人番号が異なる → **実際に別の法人が存在する**。
法人番号単位で集約するのが正しい。

### 株式会社インフィニティ（5法人）

| 法人番号 | 所在地 |
|---|---|
| 1010001111224 | 東京都中央区築地2丁目1番16号 |
| 1010501049740 | 東京都台東区台東4丁目8番2号 |
| 1140001119840 | 兵庫県神戸市中央区磯辺通2丁目2番25号 |
| 2230001014734 | 富山県高岡市横田町2丁目12番13号 |
| 3250001013460 | 山口県岩国市藤生町3丁目1番5号 |

### 日本交通株式会社（3法人）

| 法人番号 | 所在地 |
|---|---|
| 1011501015889 | 東京都北区浮間5丁目4番51号 |
| 3011501015887 | 東京都千代田区紀尾井町3番12号 |
| 4011501015894 | 東京都北区浮間5丁目4番51号 |

---

## 地方公共団体のデータ品質問題

### パターン①: 他の都道府県の法人番号が混入（入力ミス型）

正しい法人番号を持つ行は300〜500行あるのに対し、誤った法人番号は2〜4行のみ。
**厚生労働省の事業に集中**しており、担当者によるコピーミスと推察される。

#### 埼玉県（最も顕著なケース）

**正しい法人番号**: `1000020110001`（埼玉県）371行

| 混入CN | NTA照合結果 | 行数 | 金額 | 府省庁 |
|---|---|---|---|---|
| `1000020140007` | **神奈川県**（別の都道府県） | 4行 | 約66億円 | 厚生労働省（PID=2777, 2790） |
| `1000020230006` | **愛知県**（別の都道府県） | 2行 | 約3億円 | 厚生労働省 |
| `8000020190004` | **山梨県**（別の都道府県） | 2行 | 約2億円 | 厚生労働省 |

→ 厚生労働省の担当者が、都道府県向け補助金の法人番号入力時に別の都道府県の番号をコピーしたと推察。支払先は埼玉県で正しいが、法人番号フィールドが誤り。

#### その他の都道府県での同様ケース

| spendingName | 正しいCN | 混入CN | NTA照合（混入先） | 行数 | 金額 |
|---|---|---|---|---|---|
| 福岡県 | `6000020400009`（福岡県） | `6000020271004` | **大阪市** | 2行 | 約1.5億円 |
| 福岡県 | 〃 | `3000020401307` | **福岡市** | 2行 | 約643万円 |
| 新潟県 | `5000020150002`（新潟県） | `2000020350001` | **山口県** | 2行 | 約765万円 |
| 新潟県 | 〃 | `4000020180009` | **福井県** | 2行 | 約1,640万円 |
| 福島県 | `7000020070009`（福島県） | `6000020400009` | **福岡県** | 2行 | 約23.9万円 |
| 大分県 | `1000020440001`（大分県） | `4000020450006` | **宮崎県** | 4行 | 約1,564万円 |
| 宮崎県 | `4000020450006`（宮崎県） | `8000020460001` | **鹿児島県** | 2行 | 約2,450万円 |
| 山梨県 | `8000020190004`（山梨県） | `4000020330001` | **岡山県** | 2行 | 約4,894万円 |
| 岡山県 | `4000020330001`（岡山県） | `7000020340006` | **広島県** | 2行 | 約21万円 |
| 静岡県 | `7000020220001`（静岡県） | `4000020210005` | **岐阜県** | 2行 | 約3億円 |
| 愛知県 | `1000020230006`（愛知県） | `7000020220001` | **静岡県** | 2行 | 約2.75億円 |
| 三重県 | `5000020240001`（三重県） | `1000020230006` | **愛知県** | 2行 | 約5.15億円 |
| 大阪府 | `4000020270008`（大阪府） | `4000020210005` | **岐阜県** | 2行 | 約2,070万円 |
| 北海道 | `7000020010006`（北海道） | `2000020170003` | **石川県** | 2行 | 約6億円 |

---

### パターン②: 民間・団体の法人番号が混入（別法人型）

都道府県名に対して、関連する民間企業・団体のCNが誤って入力されているケース。

| spendingName | 正しいCN | 混入CN | NTA照合（混入先） | 行数 | 金額 |
|---|---|---|---|---|---|
| 広島県 | `7000020340006`（広島県） | `5240005001700` | **自治労広島県職員労働組合** | 2行 | 約356万円 |
| 長崎県 | `4000020420000`（長崎県） | `1310001002260` | **株式会社山下石油店** | 2行 | 約1.2億円 |
| 栃木県 | `5000020090000`（栃木県） | `8060005000643` | **栃木県信用保証協会** | 2行 | 約96万円 |
| 京都府 | `2000020260002`（京都府） | `2010405004147` | **独立行政法人中小企業基盤整備機構** | 2行 | 約4.8億円 |
| 対馬市 | `3000020422096`（対馬市） | `5000020014834` | **苫前町**（北海道） | ？行 | ？ |

---

### パターン③: 正常ケース（神奈川県）

神奈川県は実質的に1法人番号のみ。集約は正しい。

| 法人番号 | NTA照合 | 行数 | 合計金額 |
|---|---|---|---|
| `1000020140007` | **神奈川県 ✓ 一致** | 403行 | 約8,193億円 |
| `""`（空欄） | — | 6行 | 約4,393万円 |

空欄行はAPIで除外済み（消費者庁・厚生労働省・農林水産省の事業でCN未入力）。

---

## システム上の対応状況

- 支出先ブラウザ（`/entities`）にて、法人番号ダイアログで「✓ 一致 / 別法人 / NTA未登録」バッジを表示済み
- 入力ミス型（例: 埼玉県に神奈川県CN）は「別法人」バッジで可視化されている
- これらのバグはRSシステム由来のCSVに起因するため、アプリ側での修正は行わずバッジ表示で対応

## 今後の検討事項

- [ ] 民間企業の法人番号単位集約（現在は支出先名単位）
- [ ] 入力ミス型CNの自動検出・フラグ付け（「他の自治体のCN」を警告）
- [ ] RSシステム運営側へのデータ品質フィードバック（特に厚生労働省事業のCN誤入力）
- [ ] LLM外国法人過剰分類の修正（北海道農政事務所など国の機関を誤分類した155件の見直し）
- [ ] 国際機関カテゴリの追加検討（国連機関・条約機関等を外国法人と分けるか）
