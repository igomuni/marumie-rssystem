# RS System 2024 ã‚µãƒ³ã‚­ãƒ¼å›³å¯è¦–åŒ– - æ–°ãƒªãƒã‚¸ãƒˆãƒªè¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2025å¹´11æœˆ18æ—¥
**å¯¾è±¡**: è¡Œæ”¿äº‹æ¥­ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆRS Systemï¼‰2024å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã®ã¿

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„
è¡Œæ”¿äº‹æ¥­ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®2024å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã‚’å¯¾è±¡ã«ã€2ã¤ã®ç•°ãªã‚‹è¦–ç‚¹ã§ã‚µãƒ³ã‚­ãƒ¼å›³ã‚’ç”Ÿæˆãƒ»å¯è¦–åŒ–ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
- **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å…ˆ**: `https://rssystem.go.jp/download-csv/2024`
- **æ­£è¦åŒ–ãƒ­ã‚¸ãƒƒã‚¯**: `https://github.com/igomuni/rs_system_pipeline` å‚ç…§
- **ãƒ‡ãƒ¼ã‚¿é…ç½®**: `data/rs_system/year_2024/`ï¼ˆ15å€‹ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Next.js 15 (App Router) + TypeScript
- Tailwind CSS
- @nivo/sankeyï¼ˆã‚µãƒ³ã‚­ãƒ¼å›³å¯è¦–åŒ–ï¼‰
- LocalStorageï¼ˆè¨­å®šæ°¸ç¶šåŒ–ï¼‰

---

## 2ã¤ã®ã‚µãƒ³ã‚­ãƒ¼å›³ãƒ“ãƒ¥ãƒ¼

### 1. äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼‰

**ç›®çš„**: äºˆç®—ç·è¨ˆã‹ã‚‰å„äº‹æ¥­ã¾ã§ã®è³‡é‡‘é…åˆ†ã‚’è¿½è·¡

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
```
äºˆç®—ç·è¨ˆ â†’ åºœçœåº â†’ çµ„ç¹”éšå±¤ â†’ äº‹æ¥­
```

**çµ„ç¹”éšå±¤ã®æ‰±ã„**:
- CSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `åºœçœåº`, `å±€ãƒ»åº`, `éƒ¨`, `èª²`, `å®¤`, `ç­`, `ä¿‚`
- **èª²é¡Œ**: ãƒ‡ãƒ¼ã‚¿ãŒä¸å®Œå…¨ï¼ˆéšå±¤ãŒæ¬ ã‘ã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ï¼‰
- **è§£æ±ºç­–**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿æŒã—ã€è¡¨ç¤ºæ™‚ã«ãƒ„ãƒªãƒ¼åŒ–
  ```
  ä¾‹: ãƒ‡ã‚¸ã‚¿ãƒ«åº > æˆ¦ç•¥ãƒ»çµ„ç¹” > æ”¿åºœDXæ‹…å½“
     ï¼ˆã€Œå±€ãƒ»åºã€ã¨ã€Œèª²ã€ã®ã¿å­˜åœ¨ã€ä»–ã¯ç©ºï¼‰
  ```

**TopNæ©Ÿèƒ½**:
- äºˆç®—é¡ä¸Šä½TopNåºœçœåºã‚’å€‹åˆ¥ãƒãƒ¼ãƒ‰åŒ–
- TopNä»¥å¤–ã¯ã€Œãã®ä»–ã®åºœçœåºã€ãƒãƒ¼ãƒ‰ã«é›†ç´„
- ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³: ã€Œãã®ä»–ã€ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æ¬¡éšå±¤ã§ã•ã‚‰ã«TopNå±•é–‹

**ä½¿ç”¨CSVãƒ•ã‚¡ã‚¤ãƒ«**:
| ãƒ•ã‚¡ã‚¤ãƒ«å | ç”¨é€” | ä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|-----------|------|---------------|
| `1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv` | çµ„ç¹”éšå±¤å–å¾— | `äºˆç®—äº‹æ¥­ID`, `åºœçœåº`, `å±€ãƒ»åº`, `éƒ¨`, `èª²`, `å®¤`, `ç­`, `ä¿‚` |
| `2-1_2024_äºˆç®—ãƒ»åŸ·è¡Œ_ã‚µãƒãƒª.csv` | äºˆç®—é¡å–å¾— | `äºˆç®—äº‹æ¥­ID`, `äº‹æ¥­å`, `äºˆç®—å¹´åº¦`, `å½“åˆäºˆç®—ï¼ˆåˆè¨ˆï¼‰` |

**ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶**:
- `äºˆç®—å¹´åº¦` = `2024` ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿æŠ½å‡º

---

### 2. æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ï¼‰

**ç›®çš„**: æ”¯å‡ºå…ˆä¼æ¥­ãƒ»å›£ä½“ã‹ã‚‰è¤‡æ•°äº‹æ¥­ã¸ã®è³‡é‡‘æµå…¥ã‚’é€†ç®—

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
```
æ”¯å‡ºå…ˆç·è¨ˆ â†’ æ”¯å‡ºå…ˆ â†’ äº‹æ¥­ â†’ çµ„ç¹”éšå±¤ â†’ åºœçœåº
```

**ç‰¹å¾´**:
- 1ã¤ã®æ”¯å‡ºå…ˆãŒè¤‡æ•°ã®äº‹æ¥­ã«é–¢ä¸ã—ã¦ã„ã‚‹å ´åˆã‚’å¯è¦–åŒ–
- ä¾‹: ã€Œæ ªå¼ä¼šç¤¾ABCã€ãŒ3ã¤ã®ç•°ãªã‚‹äº‹æ¥­ã‹ã‚‰è¨ˆ50å„„å††ã‚’å—æ³¨
  â†’ ABCãƒãƒ¼ãƒ‰ã‹ã‚‰3ã¤ã®äº‹æ¥­ãƒãƒ¼ãƒ‰ã¸ãƒªãƒ³ã‚¯ã‚’æç”»

**TopNæ©Ÿèƒ½**:
- æ”¯å‡ºé¡ä¸Šä½TopNæ”¯å‡ºå…ˆã‚’å€‹åˆ¥ãƒãƒ¼ãƒ‰åŒ–
- TopNä»¥å¤–ã¯ã€Œãã®ä»–æ”¯å‡ºå…ˆã€ãƒãƒ¼ãƒ‰ã«é›†ç´„
- ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³: ã€Œãã®ä»–æ”¯å‡ºå…ˆã€ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æ¬¡éšå±¤ã§ã•ã‚‰ã«TopNå±•é–‹

**ä½¿ç”¨CSVãƒ•ã‚¡ã‚¤ãƒ«**:
| ãƒ•ã‚¡ã‚¤ãƒ«å | ç”¨é€” | ä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|-----------|------|---------------|
| `5-1_2024_æ”¯å‡ºå…ˆ_æ”¯å‡ºæƒ…å ±.csv` | æ”¯å‡ºå…ˆæƒ…å ±å–å¾— | `äºˆç®—äº‹æ¥­ID`, `æ”¯å‡ºå…ˆå`, `é‡‘é¡`, `æ”¯å‡ºå…ˆã®åˆè¨ˆæ”¯å‡ºé¡` |
| `1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv` | çµ„ç¹”éšå±¤å–å¾— | åŒä¸Š |
| `2-1_2024_äºˆç®—ãƒ»åŸ·è¡Œ_ã‚µãƒãƒª.csv` | åŸ·è¡Œé¡å–å¾— | `äºˆç®—äº‹æ¥­ID`, `åŸ·è¡Œé¡ï¼ˆåˆè¨ˆï¼‰` |

**ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯**:
1. æ”¯å‡ºå…ˆåã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
2. åŒä¸€æ”¯å‡ºå…ˆã®å…¨äº‹æ¥­ã‹ã‚‰ã®æ”¯å‡ºé¡ã‚’åˆç®—
3. äº‹æ¥­ã”ã¨ã®æ”¯å‡ºé¡ã‚‚ä¿æŒï¼ˆè¤‡æ•°ãƒªãƒ³ã‚¯æç”»ç”¨ï¼‰

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
rs-sankey-2024/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                          # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ2ãƒ“ãƒ¥ãƒ¼é¸æŠç”»é¢ï¼‰
â”‚   â”œâ”€â”€ budget-drilldown/                 # äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ãƒ“ãƒ¥ãƒ¼
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ spending-bottomup/                # æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ layout.tsx                        # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ globals.css                       # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ SankeyBudgetDrilldown.tsx     # äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ç”¨ã‚µãƒ³ã‚­ãƒ¼å›³
â”‚   â”‚   â”œâ”€â”€ SankeySpendingBottomup.tsx    # æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ç”¨ã‚µãƒ³ã‚­ãƒ¼å›³
â”‚   â”‚   â”œâ”€â”€ TopNSettingsPanel.tsx         # TopNè¨­å®šUI
â”‚   â”‚   â””â”€â”€ LoadingSpinner.tsx            # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useTopNSettings.ts            # TopNè¨­å®šç®¡ç†ãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ formatBudget.ts               # é‡‘é¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå…†å††/å„„å††/ä¸‡å††ï¼‰
â”‚       â””â”€â”€ buildHierarchyPath.ts         # çµ„ç¹”éšå±¤ãƒ‘ã‚¹ç”Ÿæˆ
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ csv-reader.ts                     # CSVãƒ‘ãƒ¼ã‚µãƒ¼ï¼ˆShift_JISå¯¾å¿œï¼‰
â”‚   â”œâ”€â”€ generate-budget-sankey.ts         # äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³JSONç”Ÿæˆ
â”‚   â””â”€â”€ generate-spending-sankey.ts       # æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—JSONç”Ÿæˆ
â”‚
â”œâ”€â”€ data/
â”‚   â””â”€â”€ rs_system/
â”‚       â””â”€â”€ year_2024/                    # 15å€‹ã®CSVãƒ•ã‚¡ã‚¤ãƒ«
â”‚           â”œâ”€â”€ 1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv
â”‚           â”œâ”€â”€ 2-1_2024_äºˆç®—ãƒ»åŸ·è¡Œ_ã‚µãƒãƒª.csv
â”‚           â”œâ”€â”€ 5-1_2024_æ”¯å‡ºå…ˆ_æ”¯å‡ºæƒ…å ±.csv
â”‚           â””â”€â”€ ...ï¼ˆè¨ˆ15ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ budget-drilldown-top5.json    # TopN=5ç”¨
â”‚       â”œâ”€â”€ budget-drilldown-top10.json   # TopN=10ç”¨
â”‚       â”œâ”€â”€ budget-drilldown-top20.json   # TopN=20ç”¨
â”‚       â”œâ”€â”€ spending-bottomup-top5.json   # TopN=5ç”¨
â”‚       â”œâ”€â”€ spending-bottomup-top10.json  # TopN=10ç”¨
â”‚       â””â”€â”€ spending-bottomup-top20.json  # TopN=20ç”¨
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ sankey.ts                         # ã‚µãƒ³ã‚­ãƒ¼å›³å‹å®šç¾©
â”‚   â””â”€â”€ rs-system.ts                      # RS System CSVå‹å®šç¾©
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ next.config.js
```

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©

### çµ„ç¹”éšå±¤ãƒ‘ã‚¹ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯

**ãƒ•ã‚¡ã‚¤ãƒ«**: `client/lib/buildHierarchyPath.ts`

```typescript
/**
 * CSVã®çµ„ç¹”éšå±¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰å­˜åœ¨ã™ã‚‹éšå±¤ã®ã¿ã‚’æŠ½å‡ºã—ã¦ãƒ‘ã‚¹ã‚’ç”Ÿæˆ
 */
export function buildHierarchyPath(row: {
  åºœçœåº: string;
  'å±€ãƒ»åº'?: string;
  éƒ¨?: string;
  èª²?: string;
  å®¤?: string;
  ç­?: string;
  ä¿‚?: string;
}): string[] {
  const parts = [row.åºœçœåº];

  if (row['å±€ãƒ»åº']) parts.push(row['å±€ãƒ»åº']);
  if (row.éƒ¨) parts.push(row.éƒ¨);
  if (row.èª²) parts.push(row.èª²);
  if (row.å®¤) parts.push(row.å®¤);
  if (row.ç­) parts.push(row.ç­);
  if (row.ä¿‚) parts.push(row.ä¿‚);

  return parts;
}

// ä½¿ç”¨ä¾‹:
// input: {
//   åºœçœåº: 'ãƒ‡ã‚¸ã‚¿ãƒ«åº',
//   'å±€ãƒ»åº': 'æˆ¦ç•¥ãƒ»çµ„ç¹”',
//   èª²: 'æ”¿åºœDXæ‹…å½“',
//   å®¤: '',  // ç©ºæ–‡å­— â†’ ç„¡è¦–
//   ç­: '',  // ç©ºæ–‡å­— â†’ ç„¡è¦–
//   ä¿‚: ''   // ç©ºæ–‡å­— â†’ ç„¡è¦–
// }
// output: ['ãƒ‡ã‚¸ã‚¿ãƒ«åº', 'æˆ¦ç•¥ãƒ»çµ„ç¹”', 'æ”¿åºœDXæ‹…å½“']
```

### ã‚µãƒ³ã‚­ãƒ¼å›³ãƒ‡ãƒ¼ã‚¿å‹

**ãƒ•ã‚¡ã‚¤ãƒ«**: `types/sankey.ts`

```typescript
export interface SankeyNode {
  id: string;                      // ä¸€æ„ãªãƒãƒ¼ãƒ‰ID
  name: string;                    // è¡¨ç¤ºå
  type: 'total' | 'ministry' | 'org' | 'project' | 'spending' | 'others';
  metadata: {
    budget?: number;               // äºˆç®—é¡ï¼ˆäºˆç®—ãƒ“ãƒ¥ãƒ¼ç”¨ï¼‰
    spending?: number;             // æ”¯å‡ºé¡ï¼ˆæ”¯å‡ºå…ˆãƒ“ãƒ¥ãƒ¼ç”¨ï¼‰
    ministry?: string;             // åºœçœåºå
    hierarchyPath?: string[];      // çµ„ç¹”éšå±¤ãƒ‘ã‚¹
    projectId?: string;            // äº‹æ¥­ID
    spendingName?: string;         // æ”¯å‡ºå…ˆå
  };
}

export interface SankeyLink {
  source: string;                  // ã‚½ãƒ¼ã‚¹ãƒãƒ¼ãƒ‰ID
  target: string;                  // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ID
  value: number;                   // ãƒªãƒ³ã‚¯ã®å€¤ï¼ˆé‡‘é¡ï¼‰
}

export interface SankeyData {
  nodes: SankeyNode[];
  links: SankeyLink[];
}
```

---

## ã‚µãƒ³ã‚­ãƒ¼JSONç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### 1. äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ç”¨

**ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/generate-budget-sankey.ts`

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. `1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv` ã‚’èª­ã¿è¾¼ã¿
2. `2-1_2024_äºˆç®—ãƒ»åŸ·è¡Œ_ã‚µãƒãƒª.csv` ã‚’èª­ã¿è¾¼ã¿ï¼ˆ`äºˆç®—å¹´åº¦=2024`ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼‰
3. äºˆç®—äº‹æ¥­IDã‚’ã‚­ãƒ¼ã«ä¸¡è€…ã‚’ãƒãƒ¼ã‚¸
4. çµ„ç¹”éšå±¤ãƒ‘ã‚¹ã‚’ç”Ÿæˆï¼ˆ`buildHierarchyPath`ä½¿ç”¨ï¼‰
5. åºœçœåºã”ã¨ã«äºˆç®—ã‚’é›†è¨ˆ
6. TopNåºœçœåºã‚’æŠ½å‡ºã€ãã‚Œä»¥å¤–ã‚’ã€Œãã®ä»–ã€ã«é›†ç´„
7. Nivo Sankeyå½¢å¼ã®JSONã‚’ç”Ÿæˆï¼ˆ`budget-drilldown-topN.json`ï¼‰

**æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰**:
```typescript
async function generateBudgetSankey(topN: number) {
  // 1. CSVãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  const orgData = await readCsv('data/rs_system/year_2024/1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv');
  const budgetData = await readCsv('data/rs_system/year_2024/2-1_2024_äºˆç®—ãƒ»åŸ·è¡Œ_ã‚µãƒãƒª.csv');

  // 2. 2024å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿
  const budget2024 = budgetData.filter(row => row.äºˆç®—å¹´åº¦ === '2024');

  // 3. äº‹æ¥­IDã”ã¨ã«ãƒãƒ¼ã‚¸
  const projects = budget2024.map(budgetRow => {
    const orgRow = orgData.find(o => o.äºˆç®—äº‹æ¥­ID === budgetRow.äºˆç®—äº‹æ¥­ID);
    const hierarchyPath = buildHierarchyPath(orgRow);

    return {
      projectId: budgetRow.äºˆç®—äº‹æ¥­ID,
      projectName: budgetRow.äº‹æ¥­å,
      ministry: hierarchyPath[0],
      hierarchyPath,
      budget: parseFloat(budgetRow['å½“åˆäºˆç®—ï¼ˆåˆè¨ˆï¼‰']) || 0
    };
  });

  // 4. åºœçœåºã”ã¨ã«é›†è¨ˆ
  const ministryBudgets = new Map<string, number>();
  projects.forEach(proj => {
    const current = ministryBudgets.get(proj.ministry) || 0;
    ministryBudgets.set(proj.ministry, current + proj.budget);
  });

  // 5. TopNåºœçœåºã‚’æŠ½å‡º
  const sorted = Array.from(ministryBudgets.entries())
    .sort((a, b) => b[1] - a[1]);
  const topNMinistries = new Set(sorted.slice(0, topN).map(m => m[0]));

  // 6. ãƒãƒ¼ãƒ‰ã¨ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
  const nodes: SankeyNode[] = [];
  const links: SankeyLink[] = [];

  // äºˆç®—ç·è¨ˆãƒãƒ¼ãƒ‰
  const totalBudget = Array.from(ministryBudgets.values()).reduce((sum, v) => sum + v, 0);
  nodes.push({
    id: 'total_budget',
    name: 'äºˆç®—ç·è¨ˆ',
    type: 'total',
    metadata: { budget: totalBudget }
  });

  // TopNåºœçœåºãƒãƒ¼ãƒ‰ + ãƒªãƒ³ã‚¯
  topNMinistries.forEach(ministry => {
    const budget = ministryBudgets.get(ministry)!;
    nodes.push({
      id: `ministry_${ministry}`,
      name: ministry,
      type: 'ministry',
      metadata: { budget, ministry }
    });

    links.push({
      source: 'total_budget',
      target: `ministry_${ministry}`,
      value: budget
    });
  });

  // ã€Œãã®ä»–ã€åºœçœåºãƒãƒ¼ãƒ‰
  const othersBudget = sorted.slice(topN).reduce((sum, [, b]) => sum + b, 0);
  if (othersBudget > 0) {
    nodes.push({
      id: 'ministry_others',
      name: `ãã®ä»–ã®åºœçœåºï¼ˆ${sorted.length - topN}ä»¶ï¼‰`,
      type: 'others',
      metadata: { budget: othersBudget }
    });

    links.push({
      source: 'total_budget',
      target: 'ministry_others',
      value: othersBudget
    });
  }

  // 7. JSONãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›
  await writeJson(`public/data/budget-drilldown-top${topN}.json`, { nodes, links });
}

// è¤‡æ•°TopNå€¤ã§ç”Ÿæˆ
[5, 10, 20].forEach(n => generateBudgetSankey(n));
```

---

### 2. æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ç”¨

**ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/generate-spending-sankey.ts`

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. `5-1_2024_æ”¯å‡ºå…ˆ_æ”¯å‡ºæƒ…å ±.csv` ã‚’èª­ã¿è¾¼ã¿
2. æ”¯å‡ºå…ˆåã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€è¤‡æ•°äº‹æ¥­ã‹ã‚‰ã®æ”¯å‡ºã‚’é›†è¨ˆ
3. TopNæ”¯å‡ºå…ˆã‚’æŠ½å‡ºã€ãã‚Œä»¥å¤–ã‚’ã€Œãã®ä»–ã€ã«é›†ç´„
4. å„æ”¯å‡ºå…ˆã‹ã‚‰äº‹æ¥­ã¸ã®ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆï¼ˆ1æ”¯å‡ºå…ˆ â†’ è¤‡æ•°äº‹æ¥­ã®å ´åˆã‚‚ã‚ã‚Šï¼‰
5. äº‹æ¥­ã‹ã‚‰çµ„ç¹”éšå±¤ã€åºœçœåºã¸ã®ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
6. Nivo Sankeyå½¢å¼ã®JSONã‚’ç”Ÿæˆï¼ˆ`spending-bottomup-topN.json`ï¼‰

**æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰**:
```typescript
async function generateSpendingBottomup(topN: number) {
  // 1. CSVãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  const spendingData = await readCsv('data/rs_system/year_2024/5-1_2024_æ”¯å‡ºå…ˆ_æ”¯å‡ºæƒ…å ±.csv');
  const orgData = await readCsv('data/rs_system/year_2024/1-1_2024_åŸºæœ¬æƒ…å ±_çµ„ç¹”æƒ…å ±.csv');

  // 2. æ”¯å‡ºå…ˆåã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼ˆè¤‡æ•°äº‹æ¥­ã«ã¾ãŸãŒã‚‹æ”¯å‡ºå…ˆã‚’çµ±åˆï¼‰
  const spendingMap = new Map<string, {
    name: string;
    totalAmount: number;
    projects: Array<{ projectId: string; projectName: string; amount: number }>;
  }>();

  spendingData.forEach(row => {
    const spendingName = row.æ”¯å‡ºå…ˆå;
    if (!spendingName) return;

    const amount = parseFloat(row.é‡‘é¡) || 0;
    const projectId = row.äºˆç®—äº‹æ¥­ID;
    const projectName = row.äº‹æ¥­å;

    if (!spendingMap.has(spendingName)) {
      spendingMap.set(spendingName, {
        name: spendingName,
        totalAmount: 0,
        projects: []
      });
    }

    const spending = spendingMap.get(spendingName)!;
    spending.totalAmount += amount;

    // æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã‹æ–°è¦ã‹åˆ¤å®š
    const existingProj = spending.projects.find(p => p.projectId === projectId);
    if (existingProj) {
      existingProj.amount += amount;
    } else {
      spending.projects.push({ projectId, projectName, amount });
    }
  });

  // 3. TopNæ”¯å‡ºå…ˆã‚’æŠ½å‡º
  const sorted = Array.from(spendingMap.values())
    .sort((a, b) => b.totalAmount - a.totalAmount);
  const topNSpendings = sorted.slice(0, topN);

  // 4. ãƒãƒ¼ãƒ‰ã¨ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
  const nodes: SankeyNode[] = [];
  const links: SankeyLink[] = [];

  // æ”¯å‡ºå…ˆç·è¨ˆãƒãƒ¼ãƒ‰
  const totalSpending = sorted.reduce((sum, s) => sum + s.totalAmount, 0);
  nodes.push({
    id: 'total_spending',
    name: 'æ”¯å‡ºå…ˆç·è¨ˆ',
    type: 'total',
    metadata: { spending: totalSpending }
  });

  // TopNæ”¯å‡ºå…ˆãƒãƒ¼ãƒ‰ + å„äº‹æ¥­ã¸ã®ãƒªãƒ³ã‚¯
  topNSpendings.forEach((spending, idx) => {
    const spendingId = `spending_${idx}`;
    nodes.push({
      id: spendingId,
      name: spending.name,
      type: 'spending',
      metadata: { spending: spending.totalAmount, spendingName: spending.name }
    });

    links.push({
      source: 'total_spending',
      target: spendingId,
      value: spending.totalAmount
    });

    // å„äº‹æ¥­ã¸ã®ãƒªãƒ³ã‚¯ï¼ˆ1ã¤ã®æ”¯å‡ºå…ˆãŒè¤‡æ•°äº‹æ¥­ã«é–¢ä¸ã™ã‚‹å ´åˆï¼‰
    spending.projects.forEach(proj => {
      const projectId = `project_${proj.projectId}`;

      // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
      if (!nodes.find(n => n.id === projectId)) {
        const orgRow = orgData.find(o => o.äºˆç®—äº‹æ¥­ID === proj.projectId);
        const hierarchyPath = orgRow ? buildHierarchyPath(orgRow) : [];

        nodes.push({
          id: projectId,
          name: proj.projectName,
          type: 'project',
          metadata: {
            projectId: proj.projectId,
            ministry: hierarchyPath[0],
            hierarchyPath
          }
        });
      }

      links.push({
        source: spendingId,
        target: projectId,
        value: proj.amount
      });
    });
  });

  // ã€Œãã®ä»–ã€æ”¯å‡ºå…ˆãƒãƒ¼ãƒ‰
  const othersSpending = sorted.slice(topN).reduce((sum, s) => sum + s.totalAmount, 0);
  if (othersSpending > 0) {
    nodes.push({
      id: 'spending_others',
      name: `ãã®ä»–ã®æ”¯å‡ºå…ˆï¼ˆ${sorted.length - topN}ä»¶ï¼‰`,
      type: 'others',
      metadata: { spending: othersSpending }
    });

    links.push({
      source: 'total_spending',
      target: 'spending_others',
      value: othersSpending
    });
  }

  // 5. JSONãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›
  await writeJson(`public/data/spending-bottomup-top${topN}.json`, { nodes, links });
}

// è¤‡æ•°TopNå€¤ã§ç”Ÿæˆ
[5, 10, 20].forEach(n => generateSpendingBottomup(n));
```

---

## UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆãƒ“ãƒ¥ãƒ¼é¸æŠï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/page.tsx`

```typescript
import Link from 'next/link';

export default function HomePage() {
  return (
    <div className="container mx-auto p-8">
      <h1 className="text-4xl font-bold mb-4 text-center">
        RS System 2024 ã‚µãƒ³ã‚­ãƒ¼å›³å¯è¦–åŒ–
      </h1>
      <p className="text-center text-gray-600 mb-12">
        è¡Œæ”¿äº‹æ¥­ãƒ¬ãƒ“ãƒ¥ãƒ¼2024å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã®è³‡é‡‘ãƒ•ãƒ­ãƒ¼ã‚’2ã¤ã®è¦–ç‚¹ã§å¯è¦–åŒ–
      </p>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        {/* äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ãƒ“ãƒ¥ãƒ¼ */}
        <Link href="/budget-drilldown">
          <div className="p-8 border-2 border-gray-300 rounded-lg hover:shadow-xl hover:border-blue-500 cursor-pointer transition-all">
            <h2 className="text-2xl font-bold mb-3 text-blue-600">
              äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ãƒ“ãƒ¥ãƒ¼
            </h2>
            <p className="text-gray-700 mb-4">
              äºˆç®—ç·è¨ˆã‹ã‚‰åºœçœåºã€çµ„ç¹”éšå±¤ã‚’çµŒã¦å„äº‹æ¥­ã¸ã®è³‡é‡‘é…åˆ†ã‚’è¿½è·¡
            </p>
            <div className="text-sm text-gray-500">
              <p>ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼: äºˆç®—ç·è¨ˆ â†’ åºœçœåº â†’ çµ„ç¹” â†’ äº‹æ¥­</p>
              <p>ğŸ” TopNè¨­å®šã§ä»»æ„ã®åºœçœåºæ•°ã‚’è¡¨ç¤ºå¯èƒ½</p>
            </div>
          </div>
        </Link>

        {/* æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼ */}
        <Link href="/spending-bottomup">
          <div className="p-8 border-2 border-gray-300 rounded-lg hover:shadow-xl hover:border-green-500 cursor-pointer transition-all">
            <h2 className="text-2xl font-bold mb-3 text-green-600">
              æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼
            </h2>
            <p className="text-gray-700 mb-4">
              æ”¯å‡ºå…ˆä¼æ¥­ãƒ»å›£ä½“ã‹ã‚‰è¤‡æ•°äº‹æ¥­ã¸ã®è³‡é‡‘æµå…¥ã‚’é€†ç®—
            </p>
            <div className="text-sm text-gray-500">
              <p>ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼: æ”¯å‡ºå…ˆç·è¨ˆ â†’ æ”¯å‡ºå…ˆ â†’ äº‹æ¥­ â†’ çµ„ç¹” â†’ åºœçœåº</p>
              <p>ğŸ” TopNè¨­å®šã§ä»»æ„ã®æ”¯å‡ºå…ˆæ•°ã‚’è¡¨ç¤ºå¯èƒ½</p>
            </div>
          </div>
        </Link>
      </div>
    </div>
  );
}
```

---

### TopNè¨­å®šãƒ‘ãƒãƒ«

**ãƒ•ã‚¡ã‚¤ãƒ«**: `client/components/TopNSettingsPanel.tsx`

```typescript
'use client';

interface Props {
  currentTopN: number;
  onTopNChange: (n: number) => void;
  viewType: 'budget' | 'spending';
}

export function TopNSettingsPanel({ currentTopN, onTopNChange, viewType }: Props) {
  const label = viewType === 'budget' ? 'åºœçœåº' : 'æ”¯å‡ºå…ˆ';

  return (
    <div className="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow">
      <h3 className="text-lg font-semibold mb-4">Top N è¨­å®š</h3>

      <div className="mb-4">
        <label className="block text-sm font-medium mb-2">
          è¡¨ç¤ºã™ã‚‹{label}ã®æ•°
        </label>
        <select
          value={currentTopN}
          onChange={(e) => onTopNChange(Number(e.target.value))}
          className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        >
          <option value={5}>Top 5</option>
          <option value={10}>Top 10</option>
          <option value={20}>Top 20</option>
          <option value={50}>Top 50</option>
        </select>
      </div>

      <div className="text-sm text-gray-600 dark:text-gray-400">
        <p>ğŸ’¡ ä¸Šä½Nä»¶ã‚’å€‹åˆ¥è¡¨ç¤º</p>
        <p>ğŸ’¡ ãã‚Œä»¥å¤–ã¯ã€Œãã®ä»–ã€ã«é›†ç´„</p>
        <p>ğŸ’¡ è¨­å®šã¯LocalStorageã«ä¿å­˜ã•ã‚Œã¾ã™</p>
      </div>
    </div>
  );
}
```

---

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯: TopNè¨­å®šç®¡ç†

**ãƒ•ã‚¡ã‚¤ãƒ«**: `client/hooks/useTopNSettings.ts`

```typescript
'use client';

import { useState, useEffect } from 'react';

const STORAGE_KEYS = {
  budget: 'rs-sankey-budget-topn',
  spending: 'rs-sankey-spending-topn'
};

const DEFAULT_TOP_N = 10;

export function useTopNSettings(viewType: 'budget' | 'spending') {
  const storageKey = STORAGE_KEYS[viewType];
  const [topN, setTopN] = useState<number>(DEFAULT_TOP_N);
  const [isLoaded, setIsLoaded] = useState(false);

  // LocalStorageã‹ã‚‰èª­ã¿è¾¼ã¿
  useEffect(() => {
    try {
      const stored = localStorage.getItem(storageKey);
      if (stored) {
        setTopN(Number(stored));
      }
    } catch (error) {
      console.error('Failed to load TopN from localStorage:', error);
    } finally {
      setIsLoaded(true);
    }
  }, [storageKey]);

  // LocalStorageã«ä¿å­˜
  const updateTopN = (n: number) => {
    try {
      localStorage.setItem(storageKey, String(n));
      setTopN(n);
    } catch (error) {
      console.error('Failed to save TopN to localStorage:', error);
    }
  };

  return { topN, updateTopN, isLoaded };
}
```

---

## package.json ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "npm run generate-sankey && next build",
    "start": "next start",
    "lint": "next lint",
    "typecheck": "tsc --noEmit",
    "generate-sankey": "tsx scripts/generate-budget-sankey.ts && tsx scripts/generate-spending-sankey.ts",
    "generate-budget": "tsx scripts/generate-budget-sankey.ts",
    "generate-spending": "tsx scripts/generate-spending-sankey.ts"
  }
}
```

---

## å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: åŸºç›¤æ§‹ç¯‰
1. âœ… Next.js 15ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
2. âœ… CSVãƒªãƒ¼ãƒ€ãƒ¼å®Ÿè£…ï¼ˆShift_JISå¯¾å¿œï¼‰
3. âœ… `buildHierarchyPath.ts` å®Ÿè£…
4. âœ… TypeScriptå‹å®šç¾©ï¼ˆ`types/sankey.ts`, `types/rs-system.ts`ï¼‰

### Phase 2: ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
5. âœ… `generate-budget-sankey.ts` å®Ÿè£…ãƒ»å®Ÿè¡Œ
6. âœ… `generate-spending-sankey.ts` å®Ÿè£…ãƒ»å®Ÿè¡Œ
7. âœ… ç”Ÿæˆã•ã‚ŒãŸJSONã®æ¤œè¨¼

### Phase 3: UIå®Ÿè£…
8. âœ… ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`app/page.tsx`ï¼‰
9. âœ… äºˆç®—ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆ`app/budget-drilldown/page.tsx`ï¼‰
10. âœ… æ”¯å‡ºå…ˆãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`app/spending-bottomup/page.tsx`ï¼‰
11. âœ… `TopNSettingsPanel.tsx` å®Ÿè£…
12. âœ… `useTopNSettings.ts` ãƒ•ãƒƒã‚¯å®Ÿè£…

### Phase 4: ã‚µãƒ³ã‚­ãƒ¼å›³æç”»
13. âœ… Nivoã‚µãƒ³ã‚­ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ
14. âœ… TopNåˆ‡ã‚Šæ›¿ãˆæ™‚ã®JSONå†èª­ã¿è¾¼ã¿
15. âœ… ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### Phase 5: ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ï¼ˆä»»æ„ï¼‰
16. ğŸ”„ ã€Œãã®ä»–ã€ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å†é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯
17. ğŸ”„ ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ã®è©³ç´°æƒ…å ±è¡¨ç¤º

---

## ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### CSVèª­ã¿è¾¼ã¿æ™‚
- [ ] Shift_JIS ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¯¾å¿œ
- [ ] BOMï¼ˆByte Order Markï¼‰é™¤å»
- [ ] ç©ºè¡Œãƒ»ç©ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] æ•°å€¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ‘ãƒ¼ã‚¹ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šå¯¾å¿œï¼‰

### ã‚µãƒ³ã‚­ãƒ¼JSONç”Ÿæˆæ™‚
- [ ] ãƒãƒ¼ãƒ‰IDã®ä¸€æ„æ€§ä¿è¨¼
- [ ] ãƒªãƒ³ã‚¯ã® source/target ãŒå­˜åœ¨ã™ã‚‹ãƒãƒ¼ãƒ‰IDã‚’å‚ç…§
- [ ] ãƒªãƒ³ã‚¯ã® value ãŒæ­£ã®æ•°å€¤
- [ ] ç·è¨ˆãƒãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒæ­£ã—ã„

### è¡¨ç¤ºæ™‚
- [ ] é‡‘é¡ãŒè² ã®å€¤ã®å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ã‚¼ãƒ­é‡‘é¡ã®ãƒãƒ¼ãƒ‰ãƒ»ãƒªãƒ³ã‚¯ã®éè¡¨ç¤º
- [ ] æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆå¯¾å¿œ
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼‰

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ¡ˆ

### ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºå‰Šæ¸›
- äº‹å‰ã«TopN=5/10/20/50ç”¨ã®JSONã‚’ç”Ÿæˆã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ä¸è¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ï¼ˆè¡¨ç¤ºã«ä½¿ã‚ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰

### æç”»æœ€é©åŒ–
- React.memo ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¡ãƒ¢åŒ–
- Nivo Sankeyã® `enableLabels={false}` ã§ãƒ©ãƒ™ãƒ«æç”»ã‚’æ‰‹å‹•åˆ¶å¾¡
- SVGè¦ç´ æ•°ã®å‰Šæ¸›ï¼ˆå°é¡ãƒªãƒ³ã‚¯ã®éè¡¨ç¤ºï¼‰

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æœ€é©åŒ–
- JSONåœ§ç¸®ï¼ˆgzip/brotliï¼‰
- CDNé…ä¿¡ï¼ˆVercel Edge Networkï¼‰
- é…å»¶èª­ã¿è¾¼ã¿ï¼ˆåˆå›è¡¨ç¤ºå¾Œã«ä»–ã®TopNãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒï¼‰

---

## ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### æ©Ÿèƒ½è¿½åŠ 
- å¹´åº¦é–“æ¯”è¼ƒï¼ˆ2023 vs 2024ï¼‰
- åºœçœåºãƒ»æ”¯å‡ºå…ˆã®æ¤œç´¢æ©Ÿèƒ½
- ã‚µãƒ³ã‚­ãƒ¼å›³ã®PNG/SVGã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- è©³ç´°ãƒ‡ãƒ¼ã‚¿ã®CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ
- è¤‡æ•°å¹´åº¦å¯¾å¿œï¼ˆ2014-2024ï¼‰
- ä»–ã®CSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ´»ç”¨ï¼ˆæ³•äººç•ªå·ã€æ‰€åœ¨åœ°ãªã©ï¼‰
- å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã¨ã®é€£æºï¼ˆe-Statã€æ³•äººç•ªå·å…¬è¡¨ã‚µã‚¤ãƒˆï¼‰

### UIæ”¹å–„
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœï¼ˆãƒãƒ¼ãƒ‰é·ç§»ï¼‰
- ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

---

## å‚è€ƒãƒªãƒ³ã‚¯

- **RS System**: https://rssystem.go.jp/
- **ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**: https://rssystem.go.jp/download-csv/2024
- **æ­£è¦åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: https://github.com/igomuni/rs_system_pipeline
- **Nivo Sankey**: https://nivo.rocks/sankey/
- **Next.js 15**: https://nextjs.org/docs

---

**è¨­è¨ˆå®Œäº†æ—¥**: 2025å¹´11æœˆ18æ—¥
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Phase 1ï¼ˆåŸºç›¤æ§‹ç¯‰ï¼‰ã‹ã‚‰å®Ÿè£…é–‹å§‹
