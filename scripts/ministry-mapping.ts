/**
 * 府省庁マッピングテーブル
 * RSシステムの府省庁名とMOFデータの所管名を紐付け
 */

/**
 * RSシステムの府省庁名 → MOFデータの所管名（標準化形式）
 */
export const RS_TO_MOF_MINISTRY_MAPPING: Record<string, string> = {
  // 一致するもの
  '内閣府': '内閣府',
  '厚生労働省': '厚生労働省',
  '財務省': '財務省',
  '総務省': '総務省',
  '国土交通省': '国土交通省',
  '文部科学省': '文部科学省',
  '農林水産省': '農林水産省',
  '経済産業省': '経済産業省',
  '外務省': '外務省',
  '法務省': '法務省',
  '環境省': '環境省',
  '防衛省': '防衛省',
  '復興庁': '復興庁',
  'デジタル庁': 'デジタル庁',

  // RSシステム独自の組織（MOFでは他に含まれる）
  '内閣官房': '内閣',
  '警察庁': '内閣府',  // 内閣府の外局
  '金融庁': '内閣府',  // 内閣府の外局
  '消費者庁': '内閣府', // 内閣府の外局
  '個人情報保護委員会': '内閣府', // 内閣府の外局
  '公害等調整委員会': '総務省', // 総務省の外局
  '消防庁': '総務省', // 総務省の外局
  '公安調査庁': '法務省', // 法務省の外局
  '出入国在留管理庁': '法務省', // 法務省の外局
  '公正取引委員会': '内閣府', // 内閣府の外局
  '国家公安委員会': '内閣府', // 警察庁を管理
  '宮内庁': '内閣府',
  '特許庁': '経済産業省',
  '中小企業庁': '経済産業省',
  '資源エネルギー庁': '経済産業省',
  '気象庁': '国土交通省',
  '海上保安庁': '国土交通省',
  '観光庁': '国土交通省',
  '林野庁': '農林水産省',
  '水産庁': '農林水産省',
  '文化庁': '文部科学省',
  'スポーツ庁': '文部科学省',
  '原子力規制委員会': '環境省',
  '検察庁': '法務省',
};

/**
 * 特別会計名 → 関連府省庁名
 */
export const SPECIAL_ACCOUNT_TO_MINISTRY: Record<string, string[]> = {
  '年金': ['厚生労働省'],
  '労働保険': ['厚生労働省'],
  '交付税及び譲与税配付金': ['総務省', '財務省'],
  '国債整理基金': ['財務省'],
  '財政投融資': ['財務省'],
  '外国為替資金': ['財務省'],
  'エネルギー対策': ['経済産業省', '環境省'],
  '食料安定供給': ['農林水産省'],
  '国有林野事業債務管理': ['農林水産省'],
  '自動車安全': ['国土交通省'],
  '東日本大震災復興': ['復興庁'],
  '特許': ['経済産業省'],
  '登記': ['法務省'],
};

/**
 * 特別会計の勘定名 → 分類
 */
export const ACCOUNT_CATEGORIES: Record<string, string> = {
  // 年金特別会計
  '厚生年金勘定': '年金',
  '国民年金勘定': '年金',
  '基礎年金勘定': '年金',
  '健康勘定': '医療',
  '子ども・子育て支援勘定': '子育て',
  '業務勘定': '管理運営',

  // 労働保険特別会計
  '雇用勘定': '雇用保険',
  '労災勘定': '労災保険',
  '徴収勘定': '徴収',

  // その他
  '一般勘定': '一般',
};

/**
 * 厚生労働省の財源内訳推定
 * MOFデータに基づく厚生労働省関連の財源構成
 */
export const MHLW_FUNDING_BREAKDOWN = {
  // 一般会計（税金ベース）
  generalAccount: {
    totalBudget: 33_981_000_000_000, // 約34兆円
    taxRevenue: 22_000_000_000_000, // 推定約22兆円（租税比率65%）
    publicBonds: 11_000_000_000_000, // 推定約11兆円（公債比率35%）
  },

  // 特別会計（年金）
  pensionSpecialAccount: {
    totalBudget: 52_200_000_000_000, // 約52兆円
    insurancePremiums: 36_460_000_000_000, // 約36.46兆円（70%）
    transferFromGeneral: 15_740_000_000_000, // 約15.74兆円（30%）
  },

  // 特別会計（労働保険）
  laborInsuranceSpecialAccount: {
    totalBudget: 3_780_000_000_000, // 約3.78兆円
    insurancePremiums: 3_650_000_000_000, // 約3.65兆円（97%）
    transferFromGeneral: 130_000_000_000, // 約1300億円（3%）
  },
};

/**
 * 所管名から府省庁名リストを抽出
 * 例: "内閣府及び厚生労働省" → ["内閣府", "厚生労働省"]
 */
export function parseJurisdiction(jurisdiction: string): string[] {
  // 「及び」「、」で分割
  return jurisdiction
    .split(/[、及び]/)
    .map((s) => s.trim())
    .filter((s) => s.length > 0);
}

/**
 * RSシステムの府省庁名をMOF標準形式に変換
 */
export function normalizeMinistryName(rsMinistryName: string): string {
  return RS_TO_MOF_MINISTRY_MAPPING[rsMinistryName] || rsMinistryName;
}
